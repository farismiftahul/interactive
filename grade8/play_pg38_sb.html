<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Modals Quiz — 4 Teams Game (Kid Friendly)</title>
  <style>
    /* Make the page white and kid-friendly. Responsive and iframe-friendly (100% sizing). */
    html,body{height:100%;margin:0;background:#ffffff}
    :root{
      --bg:#ffffff;
      --card:#f7fbff;
      --accent:#ff6f61; /* coral */
      --accent-2:#4aa3df; /* sky */
      --muted:#6b7280;
      --good:#16a34a;
      --bad:#dc2626;
      --radius:14px;
      --shadow: 0 8px 24px rgba(10,20,40,0.06);
      --maxWidth:1200px;
    }

    /* Layout tuned for iframes: full width & height available, fluid columns */
    .app{box-sizing:border-box;min-height:100vh;padding:18px;display:flex;flex-direction:column;align-items:center}
    .container{width:100%;max-width:var(--maxWidth);display:grid;grid-template-columns:360px 1fr;gap:18px}
    @media (max-width:880px){ .container{grid-template-columns:1fr; padding:12px} }

    header{width:100%;margin-bottom:6px}
    h1{font-family:Inter,system-ui,Segoe UI,Roboto,Arial,sans-serif;font-size:20px;margin:0 0 6px;color:#0f172a}
    .lead{color:var(--muted);font-size:13px;margin:0 0 12px}

    .card{background:var(--card);border-radius:var(--radius);padding:14px;box-shadow:var(--shadow);border:1px solid rgba(14,44,75,0.04)}

    /* Left column (teams & controls) */
    .teams{display:grid;grid-template-columns:1fr 1fr;gap:8px}
    .team{background:#fff;border-radius:10px;padding:10px;border:1px solid rgba(12,24,40,0.06);display:flex;flex-direction:column;gap:6px;align-items:flex-start}
    .team.active{outline:4px solid rgba(74,163,223,0.18);transform:translateY(-4px)}
    .team input[type=text]{border:0;outline:none;font-weight:700;font-size:15px;background:transparent}
    .team .score{font-size:18px;color:var(--accent-2);font-weight:800}

    .controls{display:flex;flex-wrap:wrap;gap:8px;margin-top:12px}
    button{background:white;border-radius:10px;padding:10px 12px;border:1px solid rgba(12,24,40,0.08);cursor:pointer;font-weight:700}
    .btn-primary{background:linear-gradient(90deg,var(--accent-2),#7bdcff);color:white;border:0}
    .btn-ghost{background:transparent}
    .btn-danger{background:linear-gradient(90deg,#ff7a7a,#ff5960);color:white;border:0}

    .info{font-size:13px;color:var(--muted);margin-top:10px}

    /* Right column (game board) */
    .board{display:flex;flex-direction:column;gap:12px}
    .metaRow{display:flex;justify-content:space-between;align-items:center;gap:8px}
    .pill{background:white;padding:8px 12px;border-radius:999px;border:1px solid rgba(12,24,40,0.06);font-weight:700}

    .cardLarge{background:linear-gradient(180deg,#ffffff,#f7fbff);border-radius:16px;padding:18px;box-shadow:var(--shadow);min-height:220px}
    .question{font-size:18px;color:#07203a;margin:0 0 8px}
    .choices{display:grid;grid-template-columns:1fr 1fr;gap:10px}
    @media (max-width:600px){ .choices{grid-template-columns:1fr} }

    .choice{background:white;padding:12px;border-radius:10px;border:1px solid rgba(12,24,40,0.06);cursor:pointer;font-weight:700;text-align:center}
    .choice.correct{background:linear-gradient(90deg,#e6fbef,#d6f7e6);border-color:var(--good)}
    .choice.wrong{background:linear-gradient(90deg,#fff1f1,#feecec);border-color:var(--bad)}
    .choice.disabled{opacity:0.6;cursor:default}

    .explain{background:white;padding:10px;border-radius:10px;border:1px solid rgba(12,24,40,0.04);font-size:14px;color:#13324d}

    .progress{height:12px;background:#eef3f8;border-radius:999px;overflow:hidden}
    .progress > i{display:block;height:100%;background:linear-gradient(90deg,var(--accent-2),#b2e7ff);width:0%}

    footer{width:100%;margin-top:10px;text-align:center;color:var(--muted);font-size:13px}

    /* Make iframe-friendly: let parent control height; use 100% widths */
    :root{scrollbar-gutter:stable}
    *{box-sizing:border-box}
  </style>
</head>
<body>
  <div class="app">
    <header>
      <h1>Modals of Permission & Request — Team Quiz</h1>
      <div class="lead">Turn-based classroom game for four teams. Use big buttons and colorful cards for younger learners.</div>
    </header>

    <div class="container">
      <!-- left column -->
      <div class="card">
        <div style="display:flex;gap:8px;align-items:center;justify-content:space-between">
          <div style="font-weight:800">Teams</div>
          <div style="font-size:13px;color:var(--muted)">Click a team to make it active</div>
        </div>

        <div class="teams" style="margin-top:10px" id="teamsContainer">
          <div class="team" data-index="0"><input id="t0" type="text" value="Team A" maxlength="18" /><div class="score" id="s0">0</div></div>
          <div class="team" data-index="1"><input id="t1" type="text" value="Team B" maxlength="18" /><div class="score" id="s1">0</div></div>
          <div class="team" data-index="2"><input id="t2" type="text" value="Team C" maxlength="18" /><div class="score" id="s2">0</div></div>
          <div class="team" data-index="3"><input id="t3" type="text" value="Team D" maxlength="18" /><div class="score" id="s3">0</div></div>
        </div>

        <div style="margin-top:12px;font-weight:700">Active team: <span id="activeName">Team A</span></div>

        <div class="controls">
          <button id="startBtn" class="btn-primary">Start Game</button>
          <button id="nextBtn">Next (rotate)</button>
          <button id="correctBtn" class="btn-primary">Correct (+10)</button>
          <button id="wrongBtn" class="btn-danger">Incorrect</button>
          <button id="passBtn">Pass</button>
          <button id="revealBtn">Reveal</button>
          <button id="resetBtn" class="btn-ghost">Reset</button>
        </div>

        <div class="info">Tip: Use <strong>Correct</strong> to add points for the active team, or have teams tap a choice themselves.</div>
      </div>

      <!-- right column -->
      <div>
        <div class="cardLarge card">
          <div class="metaRow">
            <div class="pill">Questions left: <strong id="remaining">24</strong></div>
            <div style="display:flex;gap:8px;align-items:center"><div class="pill">Scoreboard</div></div>
          </div>

          <div style="margin-top:12px">
            <div class="question" id="question">Click Start Game to begin.</div>

            <div class="choices" id="choices"></div>

            <div style="margin-top:12px" class="progress"><i id="bar"></i></div>

            <div class="explain" id="explain" style="display:none"></div>
          </div>
        </div>

        <div style="margin-top:12px" class="card">
          <div id="usedArea" class="small">Asked questions will appear here.</div>
        </div>
      </div>
    </div>

    <footer>Designed for classroom use — resize this page when embedding in an &lt;iframe&gt; (it is responsive).</footer>
  </div>

  <script>
    // same 24 question bank
    const bank = [
      {q: 'Which modal is most appropriate to ask for formal permission?','choices':['Can I leave early?','Could I leave early?','May I leave early?','Will I leave early?'],'correct':2,'ex':'"May" is the most formal way to ask for permission.'},
      {q:'Which sentence shows asking permission politely using "could"?','choices':['Could I turn on the TV?','Could you turn on the TV?','Can I turn on the TV?','May I turn on the TV?'],'correct':0,'ex':'"Could I..." is a polite way to ask for permission for yourself.'},
      {q:'You want someone to do something now in an informal situation. Which modal fits?','choices':['Could you please close the window?','Will you close the window?','Would you mind closing the window?','Could I close the window?'],'correct':1,'ex':'"Will you..." or "Can you..." are used in less formal situations to make requests.'},
      {q:'Choose the most polite formal request:','choices':['Can you pass the salt?','Could you pass the salt?','Will you pass the salt?','Can I pass the salt?'],'correct':1,'ex':'"Could" is more formal and polite when making requests.'},
      {q:'Which sentence uses "would you mind" correctly?','choices':['Would you mind closing the window?','Would you mind to close the window?','Would you mind if I closes the window?','Would you mind I closed the window?'],'correct':0,'ex':'"Would you mind + Ving" is correct: "Would you mind closing the window?"'},
      {q:'Which option places "please" to be polite with a modal?','choices':['Please could you open the door?','Could you please open the door?','Could please you open the door?','Please you could open the door?'],'correct':1,'ex':'Place "please" after the subject or at the end: "Could you please..."'},
      {q:'Which sentence is a request using "can" (informal)?','choices':['Can I borrow your book, please?','Can you borrow my book?','Can you borrow your book?','Can I borrow you book?'],'correct':0,'ex':'"Can I borrow your book, please?" uses "can" to ask permission.'},
      {q:'For a polite refusal request, which modal would you choose?','choices':['Can you help me?','May you help me?','Would you mind helping me?','Could you help me?'],'correct':2,'ex':'"Would you mind..." is a polite phrasing for requests; often used for polite preference.'},
      {q:'Which is correct for asking permission to ask a question in a classroom?','choices':['Can I ask a question, please?','Could I ask a question, please?','May I ask a question, please?','All are possible'],'correct':3,'ex':'All three are possible; "may" is most formal, "could" is polite, "can" is common.'},
      {q:'Which sentence uses "would" for a polite request to a person?','choices':['Would you read it aloud?','Would you please to read it?','Would you to read it?','Would you read it? please'],'correct':0,'ex':'"Would you read it aloud?" uses "would" in a polite request.'},
      {q:'Which modal is NOT used to give permission?','choices':['Can','May','Could','Would you mind'],'correct':3,'ex':'"Would you mind" asks permission, but it\'s not used to give permission.'},
      {q:'Which sentence correctly asks someone to do something politely using "could"?','choices':['Could you turn down the TV, please?','Could you please to turn down the TV?','Could you please turn down the TV?','Could you the TV please turn down?'],'correct':2,'ex':'"Could you please turn down the TV?" is grammatically correct.'},
      {q:'Which is the best option to ask permission to see a ticket formally?','choices':['May I see your ticket, please?','Can I see your ticket, please?','Could you see my ticket?','Will you see my ticket?'],'correct':0,'ex':'"May I..." is the most formal way to ask permission.'},
      {q:'Which structure is used for a polite offer to ask permission for yourself?','choices':['Would you mind if I + V2','Would you mind + Ving','Could I + V','May you + V'],'correct':0,'ex':'"Would you mind if I + V2" asks politely for permission to do something yourself.'},
      {q:'Which sentence correctly asks someone politely to be quieter?','choices':['Would you mind being more quiet?','Would you mind to be more quiet?','Could you mind being more quiet?','Can you mind being more quiet?'],'correct':0,'ex':'"Would you mind being more quiet?" is correct (would you mind + Ving).'},
      {q:'Which sentence is a less formal request using "can"?','choices':['Can you lend me $5, please?','Could you lend me $5, please?','Would you mind lending me $5?','May you lend me $5?'],'correct':0,'ex':'"Can" is used in less formal situations to make requests.'},
      {q:'Choose the most natural polite question to offer help:','choices':['Can I help you?','Would I help you?','Could I helped you?','May me help you?'],'correct':0,'ex':'"Can I help you?" is natural and common for offers of help.'},
      {q:'Which sentence shows asking permission to switch on TV politely?','choices':['Could I turn on the TV?','Could you turn on the TV?','Can I turn on the TV?','May I turned on the TV?'],'correct':0,'ex':'"Could I turn on the TV?" is a polite request for permission.'},
      {q:'Which modal pair is used in more formal request situations?','choices':['can & will','could & would','can & may','will & may'],'correct':1,'ex':'"Could" and "would" are used in more formal situations to make requests.'},
      {q:'Which sentence is correct with "with please" placement?','choices':['Would you please turn down the TV?','Please would you turn down the TV?','Would you turn down please the TV?','Would please you turn down the TV?'],'correct':0,'ex':'"Would you please ..." is correct; please can be after the subject.'},
      {q:'Which modal is most polite for asking permission to make a change?','choices':['Can','Could','May','Will'],'correct':2,'ex':'"May" is the most formal/polite for permission.'},
      {q:'Which sentence correctly uses "could" to make a request to another person?','choices':['Could you pass me the book?','Could I pass you the book?','Can you pass me the book?','May I pass you the book?'],'correct':0,'ex':'"Could you pass me the book?" uses "could" to request something from someone.'},
      {q:'Which structure is used to ask politeness about someone else doing something?','choices':['Would you mind + Ving','Could I + V','May I + V','Can I + V'],'correct':0,'ex':'"Would you mind + Ving" makes very polite requests about someone else doing something.'}
    ];

    // state
    let remainingIdx = [];
    let asked = [];
    let current = null;
    let currentTeam = 0; // 0..3
    let scores = [0,0,0,0];

    // DOM refs
    const remainingEl = document.getElementById('remaining');
    const barEl = document.getElementById('bar');
    const questionEl = document.getElementById('question');
    const choicesEl = document.getElementById('choices');
    const explainEl = document.getElementById('explain');
    const startBtn = document.getElementById('startBtn');
    const nextBtn = document.getElementById('nextBtn');
    const correctBtn = document.getElementById('correctBtn');
    const wrongBtn = document.getElementById('wrongBtn');
    const passBtn = document.getElementById('passBtn');
    const revealBtn = document.getElementById('revealBtn');
    const resetBtn = document.getElementById('resetBtn');
    const activeName = document.getElementById('activeName');
    const teamsContainer = document.getElementById('teamsContainer');

    function init(){
      remainingIdx = Array.from({length: bank.length}, (_,i)=>i);
      asked = [];
      current = null;
      currentTeam = 0;
      scores = [0,0,0,0];
      updateScoresUI();
      remainingEl.textContent = remainingIdx.length;
      barEl.style.width = '0%';
      questionEl.textContent = 'Click Start Game to begin.';
      choicesEl.innerHTML = '';
      explainEl.style.display = 'none';
      nextBtn.disabled = true;
      correctBtn.disabled = true;
      wrongBtn.disabled = true;
      passBtn.disabled = true;
      revealBtn.disabled = true;
      updateActiveUI();
      document.getElementById('usedArea').textContent = 'Asked questions will appear here.';
    }

    function pick(){
      if (remainingIdx.length === 0) return null;
      const r = Math.floor(Math.random()*remainingIdx.length);
      const idx = remainingIdx.splice(r,1)[0];
      asked.push(idx);
      remainingEl.textContent = remainingIdx.length;
      const done = asked.length;
      barEl.style.width = `${(done/bank.length)*100}%`;
      return idx;
    }

    function renderQuestion(idx){
      current = idx;
      const item = bank[idx];
      questionEl.textContent = `${asked.length}. (For ${getTeamName(currentTeam)}) ${item.q}`;
      choicesEl.innerHTML = '';
      explainEl.style.display = 'none';
      item.choices.forEach((c,i)=>{
        const div = document.createElement('div');
        div.className = 'choice';
        div.textContent = c;
        div.dataset.index = i;
        div.addEventListener('click', onChoice);
        choicesEl.appendChild(div);
      });
      nextBtn.disabled = true;
      correctBtn.disabled = false;
      wrongBtn.disabled = false;
      passBtn.disabled = false;
      revealBtn.disabled = false;
      updateActiveUI();
    }

    function onChoice(e){
      const choiceEl = e.currentTarget;
      if (choiceEl.classList.contains('disabled')) return;
      const picked = Number(choiceEl.dataset.index);
      const correct = bank[current].correct;
      Array.from(choicesEl.children).forEach(ch=>{
        ch.classList.add('disabled');
        if (Number(ch.dataset.index) === correct) ch.classList.add('correct');
        if (Number(ch.dataset.index) === picked && picked !== correct) ch.classList.add('wrong');
      });
      if (picked === correct){ scores[currentTeam] += 10; explainEl.innerHTML = `<strong>Correct.</strong> ${bank[current].ex}`; }
      else { explainEl.innerHTML = `<strong>Incorrect.</strong> ${bank[current].ex}`; }
      explainEl.style.display = 'block';
      updateScoresUI();
      nextBtn.disabled = false;
      correctBtn.disabled = true;
      wrongBtn.disabled = true;
      passBtn.disabled = true;
      revealBtn.disabled = true;
      updateUsedArea();
    }

    function awardCorrect(){ scores[currentTeam] += 10; explainEl.innerHTML = `<strong>Correct.</strong> ${bank[current].ex}`; explainEl.style.display = 'block'; updateScoresUI(); nextBtn.disabled = false; correctBtn.disabled = true; wrongBtn.disabled = true; passBtn.disabled = true; revealBtn.disabled = true; updateUsedArea(); }
    function markWrong(){ explainEl.innerHTML = `<strong>Incorrect.</strong> ${bank[current].ex}`; explainEl.style.display = 'block'; nextBtn.disabled = false; correctBtn.disabled = true; wrongBtn.disabled = true; passBtn.disabled = true; revealBtn.disabled = true; updateUsedArea(); }
    function passQuestion(){ explainEl.innerHTML = `<strong>Passed.</strong> Answer: ${bank[current].choices[bank[current].correct]}.`; explainEl.style.display = 'block'; nextBtn.disabled = false; correctBtn.disabled = true; wrongBtn.disabled = true; passBtn.disabled = true; revealBtn.disabled = true; updateUsedArea(); }
    function revealAnswer(){ Array.from(choicesEl.children).forEach(ch=>{ ch.classList.add('disabled'); if (Number(ch.dataset.index) === bank[current].correct) ch.classList.add('correct'); }); explainEl.style.display = 'block'; explainEl.textContent = `Answer: ${bank[current].choices[bank[current].correct]}. ${bank[current].ex}`; nextBtn.disabled = false; correctBtn.disabled = true; wrongBtn.disabled = true; passBtn.disabled = true; revealBtn.disabled = true; updateUsedArea(); }

    function nextTurn(){ currentTeam = (currentTeam + 1) % 4; updateActiveUI(); const idx = pick(); if (idx === null){ questionEl.textContent = 'All questions completed.'; choicesEl.innerHTML = ''; explainEl.style.display = 'block'; explainEl.textContent = `Game over. Final scores:
${scores.map((s,i)=>`${getTeamName(i)}: ${s}`).join('
')}`; nextBtn.disabled = true; correctBtn.disabled = true; wrongBtn.disabled = true; passBtn.disabled = true; revealBtn.disabled = true; updateUsedArea(); return; } renderQuestion(idx); updateUsedArea(); }

    function updateScoresUI(){ for(let i=0;i<4;i++) document.getElementById('s'+i).textContent = scores[i]; }
    function getTeamName(i){ const input = document.getElementById('t'+i); return input ? (input.value || `Team ${i+1}`) : `Team ${i+1}`; }
    function updateActiveUI(){ Array.from(teamsContainer.children).forEach(ch=>{ const idx = Number(ch.dataset.index); if (idx === currentTeam) ch.classList.add('active'); else ch.classList.remove('active'); }); activeName.textContent = getTeamName(currentTeam); }
    function updateUsedArea(){ if (asked.length === 0) { document.getElementById('usedArea').textContent = 'Asked questions will appear here.'; return; } const list = asked.map((i,idx)=>`${idx+1}. ${bank[i].q}`).join('
'); document.getElementById('usedArea').innerHTML = '<pre style="margin:0">'+escapeHtml(list)+'</pre>'; }
    function escapeHtml(s){ return s.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;'); }

    // button wiring
    startBtn.addEventListener('click', ()=>{ init(); // copy top team-name inputs (if present)
      for(let i=0;i<4;i++){ const top = document.getElementById('team'+i+'Name'); const inpt = document.getElementById('t'+i); if (top && inpt) inpt.value = top.value || inpt.value; }
      const idx = pick(); if (idx!==null) renderQuestion(idx); updateUsedArea(); });
    nextBtn.addEventListener('click', ()=>{ nextTurn(); });
    correctBtn.addEventListener('click', ()=>{ awardCorrect(); });
    wrongBtn.addEventListener('click', ()=>{ markWrong(); });
    passBtn.addEventListener('click', ()=>{ passQuestion(); });
    revealBtn.addEventListener('click', ()=>{ revealAnswer(); });
    resetBtn.addEventListener('click', ()=>{ init(); });

    // allow clicking team to set active
    Array.from(teamsContainer.children).forEach(ch=>{ ch.addEventListener('click', ()=>{ currentTeam = Number(ch.dataset.index); updateActiveUI(); }); });

    // init on load
    init();
  </script>
</body>
</html>
